<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Platform - –ü—Ä–æ–≤–µ—Ä–∏–º –±—ã—Å—Ç—Ä–æ!</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen font-sans">
    <div id="app" class="container mx-auto px-4 py-8">
        <nav class="bg-white shadow-lg rounded-2xl p-6 mb-8">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="bg-indigo-600 text-white p-3 rounded-xl">
                        <i class="fas fa-brain text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">QuizPlatform</h1>
                        <p class="text-gray-600 text-sm">–ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–Ω–∞–Ω–∏—è –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4" v-if="user">
                    <div class="text-right">
                        <div class="font-medium text-gray-800">{{ user.full_name || user.username }}</div>
                        <div class="text-sm" :class="user.role === 'admin' ? 'text-purple-600' : 'text-green-600'">
                            {{ user.role === 'admin' ? 'üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : 'üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' }}
                        </div>
                    </div>
                    <button @click="logout" class="btn-secondary">
                        <i class="fas fa-sign-out-alt mr-2"></i>–í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        </nav>

        <div class="grid grid-cols-1 lg-grid-cols-4 gap-8">
            <div class="lg-col-span-1">
                <div class="bg-white rounded-2xl shadow-lg p-6 sticky top-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">–ú–µ–Ω—é</h2>
                    
                    <nav class="space-y-2">
                        <button @click="currentView = 'quizzes'" 
                                :class="['nav-btn', currentView === 'quizzes' ? 'nav-btn-active' : '']">
                            <i class="fas fa-list mr-3"></i>–í—Å–µ –∫–≤–∏–∑—ã
                        </button>
                        
                        <button @click="currentView = 'myAttempts'" 
                                :class="['nav-btn', currentView === 'myAttempts' ? 'nav-btn-active' : '']"
                                v-if="user">
                            <i class="fas fa-history mr-3"></i>–ú–æ–∏ –ø–æ–ø—ã—Ç–∫–∏
                        </button>
                        
                        <button @click="currentView = 'stats'" 
                                :class="['nav-btn', currentView === 'stats' ? 'nav-btn-active' : '']"
                                v-if="user">
                            <i class="fas fa-chart-bar mr-3"></i>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                        </button>
                        
                        <button @click="currentView = 'achievements'" 
                                :class="['nav-btn', currentView === 'achievements' ? 'nav-btn-active' : '']"
                                v-if="user">
                            <i class="fas fa-trophy mr-3"></i>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                        </button>
                        
                        <button @click="currentView = 'certificates'" 
                                :class="['nav-btn', currentView === 'certificates' ? 'nav-btn-active' : '']"
                                v-if="user">
                            <i class="fas fa-certificate mr-3"></i>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
                        </button>
                        
                        <button @click="currentView = 'leaderboard'" 
                                :class="['nav-btn', currentView === 'leaderboard' ? 'nav-btn-active' : '']"
                                v-if="user">
                            <i class="fas fa-chart-line mr-3"></i>–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤
                        </button>
                        
                        <button @click="currentView = 'export'" 
                                :class="['nav-btn', currentView === 'export' ? 'nav-btn-active' : '']"
                                v-if="user">
                            <i class="fas fa-download mr-3"></i>–≠–∫—Å–ø–æ—Ä—Ç
                        </button>
                        
                        <button @click="currentView = 'createQuiz'" 
                                :class="['nav-btn', currentView === 'createQuiz' ? 'nav-btn-active' : '']"
                                v-if="user && user.role === 'admin'">
                            <i class="fas fa-plus-circle mr-3"></i>–°–æ–∑–¥–∞—Ç—å –∫–≤–∏–∑
                        </button>
                        
                        <button @click="currentView = 'questionBanks'" 
                                :class="['nav-btn', currentView === 'questionBanks' ? 'nav-btn-active' : '']"
                                v-if="user && user.role === 'admin'">
                            <i class="fas fa-database mr-3"></i>–ë–∞–Ω–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤
                        </button>
                        
                        <div class="pt-6 border-t">
                            <div class="text-sm text-gray-500 mb-2">–¢–µ–∫—É—â–∏–π —Å–µ–∞–Ω—Å</div>
                            <div class="text-sm" v-if="user">
                                <div class="flex justify-between py-1">
                                    <span class="text-gray-600">–ü–æ–ø—ã—Ç–æ–∫:</span>
                                    <span class="font-medium">{{ userStats.total_attempts || 0 }}</span>
                                </div>
                                <div class="flex justify-between py-1">
                                    <span class="text-gray-600">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–π:</span>
                                    <span class="font-medium">{{ userAchievements.length || 0 }}</span>
                                </div>
                                <div class="flex justify-between py-1">
                                    <span class="text-gray-600">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:</span>
                                    <span class="font-medium">{{ certificates.length || 0 }}</span>
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>

            <div class="lg-col-span-3">
                <div v-if="!user" class="bg-white rounded-2xl shadow-lg p-8">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                        <p class="text-gray-600">–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –∫–≤–∏–∑–æ–≤</p>
                    </div>
                    
                    <div class="grid md-grid-cols-2 gap-8">
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h3 class="text-xl font-bold text-gray-800 mb-6">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input v-model="loginEmail" type="email" 
                                           class="input-field" 
                                           placeholder="admin@quiz.com">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">–ü–∞—Ä–æ–ª—å</label>
                                    <input v-model="loginPassword" type="password" 
                                           class="input-field" 
                                           placeholder="admin123">
                                </div>
                                
                                <div class="flex space-x-3">
                                    <button @click="quickLogin('admin')" class="quick-btn bg-indigo-100 text-indigo-700">
                                        <i class="fas fa-crown mr-2"></i>–ê–¥–º–∏–Ω
                                    </button>
                                    <button @click="quickLogin('user')" class="quick-btn bg-blue-100 text-blue-700">
                                        <i class="fas fa-user mr-2"></i>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                    </button>
                                </div>
                                
                                <button @click="login" class="btn-primary w-full">
                                    <i class="fas fa-sign-in-alt mr-2"></i>–í–æ–π—Ç–∏
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h3 class="text-xl font-bold text-gray-800 mb-6">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input v-model="registerEmail" type="email" 
                                           class="input-field" 
                                           placeholder="user@example.com">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                                    <input v-model="registerUsername" type="text" 
                                           class="input-field" 
                                           placeholder="username">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">–ü–æ–ª–Ω–æ–µ –∏–º—è</label>
                                    <input v-model="registerFullName" type="text" 
                                           class="input-field" 
                                           placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">–ü–∞—Ä–æ–ª—å</label>
                                    <input v-model="registerPassword" type="password" 
                                           class="input-field" 
                                           placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤">
                                </div>
                                
                                <button @click="register" class="btn-secondary w-full">
                                    <i class="fas fa-user-plus mr-2"></i>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="user && currentView === 'quizzes'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <div class="flex justify-between items-center mb-8">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–≤–∏–∑—ã</h2>
                                <p class="text-gray-600">–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∏–∑ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</p>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="relative">
                                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                    <input v-model="quizSearch" 
                                           type="text" 
                                           placeholder="–ü–æ–∏—Å–∫ –∫–≤–∏–∑–æ–≤..." 
                                           class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg">
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap gap-3 mb-6">
                            <button @click="setQuizFilter('all')" 
                                    :class="['filter-btn', quizFilter === 'all' ? 'filter-btn-active' : '']">
                                –í—Å–µ
                            </button>
                            <button @click="setQuizFilter('active')" 
                                    :class="['filter-btn', quizFilter === 'active' ? 'filter-btn-active' : '']">
                                –ê–∫—Ç–∏–≤–Ω—ã–µ
                            </button>
                            <button @click="setQuizFilter('my')" 
                                    :class="['filter-btn', quizFilter === 'my' ? 'filter-btn-active' : '']"
                                    v-if="user.role === 'admin'">
                                –ú–æ–∏ –∫–≤–∏–∑—ã
                            </button>
                        </div>
                        
                        <div class="grid md-grid-cols-2 gap-6">
                            <div v-for="quiz in filteredQuizzes" :key="quiz.id" 
                                 class="quiz-card hover-shadow-xl transition-shadow duration-300 fade-in">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-800 mb-2">{{ quiz.title }}</h3>
                                        <p class="text-gray-600 text-sm mb-4">{{ quiz.description || '–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è' }}</p>
                                    </div>
                                    <span class="px-3 py-1 bg-indigo-100 text-indigo-800 text-sm font-medium rounded-full">
                                        {{ quiz.questions_count }} –≤–æ–ø—Ä–æ—Å–æ–≤
                                    </span>
                                </div>
                                
                                <div class="flex justify-between items-center mb-4">
                                    <div class="flex items-center text-gray-600">
                                        <i class="fas fa-clock mr-2"></i>
                                        <span>{{ quiz.time_limit_minutes }} –º–∏–Ω</span>
                                    </div>
                                    <div class="flex items-center text-gray-600">
                                        <i class="fas fa-star mr-2"></i>
                                        <span>{{ quiz.total_points }} –±–∞–ª–ª–æ–≤</span>
                                    </div>
                                </div>
                                
                                <div class="flex justify-between items-center">
                                    <button @click.prevent="startQuiz(quiz)" class="btn-primary">
                                        <i class="fas fa-play mr-2"></i>–ù–∞—á–∞—Ç—å
                                    </button>
                                    
                                    <div class="text-sm text-gray-500">
                                        <i class="far fa-calendar mr-1"></i>
                                        {{ new Date(quiz.created_at).toLocaleDateString() }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div v-if="filteredQuizzes.length === 0" class="text-center py-12">
                            <i class="fas fa-search text-4xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-medium text-gray-600 mb-2">–ö–≤–∏–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                            <p class="text-gray-500">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–≤–∏–∑</p>
                        </div>
                    </div>
                </div>

                <div v-if="currentView === 'quizTaking'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <div class="mb-8">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-2xl font-bold text-gray-800">{{ currentQuiz.title }}</h2>
                                <div class="text-right">
                                    <div class="text-lg font-bold" :class="timeLeft < 60 ? 'text-red-600' : 'text-gray-800'">
                                        <i class="fas fa-clock mr-2"></i>
                                        {{ formatTime(timeLeft) }}
                                    </div>
                                    <div class="text-sm text-gray-600">–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏</div>
                                </div>
                            </div>
                            
                            <div class="mb-6">
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>–í–æ–ø—Ä–æ—Å {{ currentQuestionIndex + 1 }} –∏–∑ {{ currentQuiz.questions.length }}</span>
                                    <span>{{ Math.round((currentQuestionIndex + 1) / currentQuiz.questions.length * 100) }}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" :style="{ width: ((currentQuestionIndex + 1) / currentQuiz.questions.length * 100) + '%' }"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div v-if="currentQuestion" class="mb-8">
                            <div class="bg-gray-50 p-6 rounded-xl mb-6">
                                <div class="flex justify-between items-start mb-4">
                                    <h3 class="text-lg font-medium text-gray-800">–í–æ–ø—Ä–æ—Å {{ currentQuestionIndex + 1 }}</h3>
                                    <span class="px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full">
                                        {{ currentQuestion.points }} –±–∞–ª–ª–æ–≤
                                    </span>
                                </div>
                                <p class="text-gray-700 text-lg">{{ currentQuestion.text }}</p>
                            </div>
                            
                            <div class="space-y-3">
                                <div v-for="option in currentQuestion.options" :key="option.id"
                                     @click="selectOption(option.id)"
                                     :class="['option-card', selectedOption === option.id ? 'option-card-selected' : '']">
                                    <div class="flex items-center">
                                        <div class="option-radio">
                                            <div class="option-radio-inner" v-if="selectedOption === option.id"></div>
                                        </div>
                                        <span class="ml-4">{{ option.text }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between pt-6 border-t">
                            <button @click="prevQuestion" 
                                    :disabled="currentQuestionIndex === 0"
                                    class="btn-secondary" 
                                    :class="{ 'opacity-50 cursor-not-allowed': currentQuestionIndex === 0 }">
                                <i class="fas fa-arrow-left mr-2"></i>–ù–∞–∑–∞–¥
                            </button>
                            
                            <div class="flex space-x-3">
                                <button v-if="currentQuestionIndex < currentQuiz.questions.length - 1"
                                        @click="nextQuestion"
                                        class="btn-primary">
                                    –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å <i class="fas fa-arrow-right ml-2"></i>
                                </button>
                                
                                <button v-if="currentQuestionIndex === currentQuiz.questions.length - 1"
                                        @click="submitQuiz"
                                        class="btn-success">
                                    <i class="fas fa-check-circle mr-2"></i>–ó–∞–≤–µ—Ä—à–∏—Ç—å –∫–≤–∏–∑
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="currentView === 'quizResult'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <div class="text-center mb-8">
                            <div class="inline-block p-4 bg-gradient-to-r from-green-400 to-blue-500 rounded-full mb-4">
                                <i class="fas fa-trophy text-4xl text-white"></i>
                            </div>
                            <h2 class="text-3xl font-bold text-gray-800 mb-2">–ö–≤–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω!</h2>
                            <p class="text-gray-600">{{ currentQuiz.title }}</p>
                        </div>
                        
                        <div class="grid md-grid-cols-4 gap-6 mb-8">
                            <div class="stat-card">
                                <div class="stat-value">{{ quizResult.total_points }}/{{ quizResult.max_points }}</div>
                                <div class="stat-label">–ë–∞–ª–ª—ã</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value" :class="getPercentageColor(quizResult.total_points / quizResult.max_points * 100)">
                                    {{ Math.round(quizResult.total_points / quizResult.max_points * 100) }}%
                                </div>
                                <div class="stat-label">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value">{{ formatTime(quizResult.time_spent_seconds || 0) }}</div>
                                <div class="stat-label">–í—Ä–µ–º—è</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value">
                                    {{ new Date(quizResult.finished_at).toLocaleTimeString() }}
                                </div>
                                <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω</div>
                            </div>
                        </div>
                        
                        <div class="mb-8">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">–î–µ—Ç–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h3>
                            <div class="space-y-4">
                                <div v-for="(answer, index) in quizResult.answers" :key="answer.id"
                                     class="p-4 rounded-lg border" 
                                     :class="answer.is_correct ? 'border-green-200 bg-green-50' : 'border-red-200 bg-red-50'">
                                    <div class="flex justify-between items-start mb-2">
                                        <div class="font-medium text-gray-800">–í–æ–ø—Ä–æ—Å {{ index + 1 }}</div>
                                        <div class="flex items-center">
                                            <span class="px-2 py-1 text-xs font-medium rounded"
                                                  :class="answer.is_correct ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'">
                                                {{ answer.points_earned }}/{{ getQuestionPoints(answer.question_id) }} –±–∞–ª–ª–æ–≤
                                            </span>
                                        </div>
                                    </div>
                                    <div class="text-sm" :class="answer.is_correct ? 'text-green-700' : 'text-red-700'">
                                        <i class="fas fa-check mr-1" v-if="answer.is_correct"></i>
                                        <i class="fas fa-times mr-1" v-else></i>
                                        {{ answer.is_correct ? '–ü—Ä–∞–≤–∏–ª—å–Ω–æ' : '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ' }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-center space-x-4 pt-6 border-t">
                            <button @click="currentView = 'quizzes'" class="btn-secondary">
                                <i class="fas fa-list mr-2"></i>–ö —Å–ø–∏—Å–∫—É –∫–≤–∏–∑–æ–≤
                            </button>
                            <button @click="currentView = 'myAttempts'" class="btn-secondary">
                                <i class="fas fa-history mr-2"></i>–ú–æ–∏ –ø–æ–ø—ã—Ç–∫–∏
                            </button>
                            
                            <button @click="exportSingleResult(quizResult.id)" class="btn-primary">
                                <i class="fas fa-download mr-2"></i>–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                            </button>
                        </div>
                    </div>
                </div>

                <div v-if="user && currentView === 'myAttempts'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-8">–ú–æ–∏ –ø–æ–ø—ã—Ç–∫–∏</h2>
                        
                        <div class="space-y-4">
                            <div v-for="attempt in userAttempts" :key="attempt.id"
                                 class="attempt-card hover-shadow-md transition-shadow duration-300 fade-in">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="font-bold text-gray-800 mb-1">{{ getQuizTitle(attempt.quiz_id) }}</h3>
                                        <div class="flex items-center text-sm text-gray-600 mb-2">
                                            <i class="far fa-clock mr-2"></i>
                                            {{ formatDate(attempt.started_at) }}
                                        </div>
                                    </div>
                                    
                                    <div class="text-right">
                                        <div class="text-lg font-bold mb-1">
                                            {{ attempt.total_points }}/{{ attempt.max_points }}
                                            <span class="text-sm font-normal">–±–∞–ª–ª–æ–≤</span>
                                        </div>
                                        <div class="text-sm" :class="getPercentageColor(attempt.total_points / attempt.max_points * 100)">
                                            {{ Math.round(attempt.total_points / attempt.max_points * 100) }}%
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 pt-4 border-t">
                                    <div class="text-sm text-gray-600">
                                        <i class="fas fa-stopwatch mr-1"></i>
                                        –í—Ä–µ–º—è: {{ formatTime(attempt.time_spent_seconds || 0) }}
                                    </div>
                                </div>
                                
                                <div class="mt-3 flex space-x-2">
                                    <button @click="viewAttemptResult(attempt.id)" class="btn-secondary text-sm">
                                        <i class="fas fa-eye mr-1"></i>–ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                    </button>
                                    <button @click="generateCertificate(attempt.id)" 
                                            class="btn-primary text-sm"
                                            v-if="attempt.total_points / attempt.max_points >= 0.7 && !certificates.find(c => c.quiz_title === getQuizTitle(attempt.quiz_id))">
                                        <i class="fas fa-certificate mr-1"></i>–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
                                    </button>
                                    <span v-else-if="attempt.total_points / attempt.max_points >= 0.7 && certificates.find(c => c.quiz_title === getQuizTitle(attempt.quiz_id))"
                                          class="text-sm text-green-600 flex items-center">
                                        <i class="fas fa-check-circle mr-1"></i>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –µ—Å—Ç—å
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div v-if="userAttempts.length === 0" class="text-center py-12">
                            <i class="fas fa-history text-4xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-medium text-gray-600 mb-2">–ù–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫</h3>
                            <p class="text-gray-500 mb-6">–ù–∞—á–Ω–∏—Ç–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –∫–≤–∏–∑–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∑–¥–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</p>
                            <button @click="currentView = 'quizzes'" class="btn-primary">
                                <i class="fas fa-play mr-2"></i>–ù–∞—á–∞—Ç—å –∫–≤–∏–∑
                            </button>
                        </div>
                    </div>
                </div>

                <div v-if="user && currentView === 'stats'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-8">–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                        
                        <div class="grid md-grid-cols-2 lg-grid-cols-4 gap-6 mb-8">
                            <div class="stat-card bg-gradient-to-br from-indigo-50 to-purple-50">
                                <div class="stat-value text-indigo-600">{{ userStats.total_attempts || 0 }}</div>
                                <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫</div>
                            </div>
                            
                            <div class="stat-card bg-gradient-to-br from-green-50 to-teal-50">
                                <div class="stat-value text-green-600">{{ userStats.avg_score || 0 }}%</div>
                                <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
                            </div>
                            
                            <div class="stat-card bg-gradient-to-br from-blue-50 to-cyan-50">
                                <div class="stat-value text-blue-600">{{ userStats.total_quizzes || 0 }}</div>
                                <div class="stat-label">–ü—Ä–æ–π–¥–µ–Ω–æ –∫–≤–∏–∑–æ–≤</div>
                            </div>
                            
                            <div class="stat-card bg-gradient-to-br from-yellow-50 to-orange-50">
                                <div class="stat-value text-yellow-600">{{ userStats.best_score || 0 }}%</div>
                                <div class="stat-label">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
                            </div>
                        </div>
                        
                        <div class="mb-8">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                            <div class="grid md-grid-cols-2 lg-grid-cols-3 gap-4">
                                <div v-for="achievement in userAchievements.slice(0, 6)" :key="achievement.id"
                                     class="bg-gradient-to-br from-yellow-50 to-orange-50 p-4 rounded-xl border border-yellow-200 shadow-hover fade-in">
                                    <div class="flex items-start">
                                        <div class="bg-yellow-100 p-3 rounded-lg mr-4">
                                            <i class="fas fa-trophy text-yellow-600 text-xl"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-bold text-gray-800 mb-1">{{ achievement.achievement.name }}</h4>
                                            <p class="text-sm text-gray-600 mb-2">{{ achievement.achievement.description }}</p>
                                            <div class="text-xs text-gray-500">
                                                –ü–æ–ª—É—á–µ–Ω–æ: {{ formatDate(achievement.earned_at) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div v-if="userAchievements.length > 6" class="text-center mt-4">
                                <button @click="currentView = 'achievements'" class="btn-secondary">
                                    –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ({{ userAchievements.length }})
                                </button>
                            </div>
                            <div v-if="userAchievements.length === 0" class="text-center py-8">
                                <p class="text-gray-500">–ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∏–∑—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="user && user.role === 'admin' && currentView === 'createQuiz'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-8">–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–≤–∏–∑–∞</h2>
                        
                        <div class="space-y-6">
                            <div class="bg-gray-50 p-6 rounded-xl">
                                <h3 class="text-lg font-medium text-gray-800 mb-4">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                                <div class="grid md-grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–≤–∏–∑–∞</label>
                                        <input v-model="newQuiz.title" type="text" class="input-field" placeholder="–û—Å–Ω–æ–≤—ã Python">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–í—Ä–µ–º—è (–º–∏–Ω—É—Ç)</label>
                                        <input v-model="newQuiz.time_limit_minutes" type="number" class="input-field" min="1" max="60" value="5">
                                    </div>
                                    <div class="md-col-span-2">
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                        <textarea v-model="newQuiz.description" rows="3" class="input-field" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫–≤–∏–∑–∞..."></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <div v-for="(question, qIndex) in newQuiz.questions" :key="qIndex"
                                 class="bg-gray-50 p-6 rounded-xl">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-medium text-gray-800">–í–æ–ø—Ä–æ—Å {{ qIndex + 1 }}</h3>
                                    <button @click="removeQuestion(qIndex)" class="text-red-600 hover-text-red-800">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞</label>
                                        <textarea v-model="question.text" rows="2" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å..."></textarea>
                                    </div>
                                    
                                    <div class="grid md-grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">–ë–∞–ª–ª—ã</label>
                                            <input v-model="question.points" type="number" class="input-field" min="1" max="10" value="1">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">–û–±—ä—è—Å–Ω–µ–Ω–∏–µ</label>
                                            <input v-model="question.explanation" type="text" class="input-field" placeholder="–ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ –æ—Ç–≤–µ—Ç—É">
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤</label>
                                        <div v-for="(option, oIndex) in question.options" :key="oIndex"
                                             class="flex items-center space-x-3 mb-2">
                                            <input v-model="option.text" type="text" 
                                                   class="input-field flex-grow" 
                                                   placeholder="–¢–µ–∫—Å—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞">
                                            <label class="flex items-center space-x-2">
                                                <input 
                                                    type="radio" 
                                                    :name="'question_' + qIndex" 
                                                    :value="oIndex"
                                                    v-model="question.correctOptionIndex"
                                                    class="h-4 w-4 text-indigo-600"
                                                >
                                                <span class="text-sm text-gray-700">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π</span>
                                            </label>
                                            <button @click="removeOption(qIndex, oIndex)" 
                                                    class="text-red-600 hover-text-red-800">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                        
                                        <button @click="addOption(qIndex)" class="btn-secondary text-sm">
                                            <i class="fas fa-plus mr-1"></i>–î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex justify-between">
                                <button @click="addQuestion" class="btn-secondary">
                                    <i class="fas fa-plus mr-2"></i>–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å
                                </button>
                                
                                <button @click="createNewQuiz" class="btn-primary" :disabled="!isQuizValid">
                                    <i class="fas fa-save mr-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–≤–∏–∑
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="user && currentView === 'export'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-8">–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h2>
                        
                        <div class="max-w-md mx-auto">
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">–§–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞</label>
                                    <div class="flex space-x-4">
                                        <label class="inline-flex items-center">
                                            <input type="radio" v-model="exportFormat" value="csv" class="h-4 w-4 text-indigo-600">
                                            <span class="ml-2">CSV</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="radio" v-model="exportFormat" value="json" class="h-4 w-4 text-indigo-600">
                                            <span class="ml-2">JSON</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="grid md-grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞</label>
                                        <input v-model="exportStartDate" type="date" class="input-field">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞</label>
                                        <input v-model="exportEndDate" type="date" class="input-field">
                                    </div>
                                </div>
                                
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <div class="flex items-start">
                                        <i class="fas fa-info-circle text-blue-500 mt-1 mr-3"></i>
                                        <div>
                                            <p class="text-sm text-blue-700">
                                                –≠–∫—Å–ø–æ—Ä—Ç –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –≤–∞—à–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                
                                <button @click="exportResults" class="btn-primary w-full">
                                    <i class="fas fa-download mr-2"></i>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="user && currentView === 'achievements'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-8">–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                        
                        <div class="mb-8">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-medium text-gray-800">–î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ</h3>
                                <span class="text-sm text-gray-500">{{ userAchievements.length }} –∏–∑ {{ achievements.length }}</span>
                            </div>
                            
                            <div class="grid md-grid-cols-2 lg-grid-cols-3 gap-4">
                                <div v-for="achievement in userAchievements" :key="achievement.id"
                                     class="bg-gradient-to-br from-yellow-50 to-orange-50 p-4 rounded-xl border border-yellow-200 shadow-hover fade-in">
                                    <div class="flex items-start">
                                        <div class="bg-yellow-100 p-3 rounded-lg mr-4">
                                            <i class="fas fa-trophy text-yellow-600 text-xl"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-bold text-gray-800 mb-1">{{ achievement.achievement.name }}</h4>
                                            <p class="text-sm text-gray-600 mb-2">{{ achievement.achievement.description }}</p>
                                            <div class="text-xs text-gray-500">
                                                –ü–æ–ª—É—á–µ–Ω–æ: {{ formatDate(achievement.earned_at) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div v-if="userAchievements.length === 0" class="text-center py-8">
                                <i class="fas fa-trophy text-4xl text-gray-300 mb-4"></i>
                                <h3 class="text-xl font-medium text-gray-600 mb-2">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                                <p class="text-gray-500">–ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∏–∑—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!</p>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-lg font-medium text-gray-800 mb-4">–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                            <div class="space-y-3">
                                <div v-for="achievement in achievements" :key="achievement.id"
                                     class="p-4 border rounded-lg hover-bg-gray-50 transition-colors slide-in">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="mr-4">
                                                <i :class="[
                                                    'fas text-2xl',
                                                    achievement.type === 'perfect_score' ? 'fa-star text-yellow-500' :
                                                    achievement.type === 'fast_completion' ? 'fa-bolt text-blue-500' :
                                                    achievement.type === 'streak' ? 'fa-fire text-red-500' :
                                                    'fa-medal text-gray-500'
                                                ]"></i>
                                            </div>
                                            <div>
                                                <h4 class="font-medium text-gray-800">{{ achievement.name }}</h4>
                                                <p class="text-sm text-gray-600">{{ achievement.description }}</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div v-if="userAchievements.find(a => a.achievement_id === achievement.id)"
                                                 class="text-green-600 text-sm">
                                                <i class="fas fa-check-circle mr-1"></i>–ü–æ–ª—É—á–µ–Ω–æ
                                            </div>
                                            <div v-else class="text-gray-400 text-sm">
                                                –ù–µ –ø–æ–ª—É—á–µ–Ω–æ
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="user && user.role === 'admin' && currentView === 'questionBanks'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <div class="flex justify-between items-center mb-8">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">–ë–∞–Ω–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤</h2>
                                <p class="text-gray-600">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –±–∞–Ω–∫–∞–º–∏ –≤–æ–ø—Ä–æ—Å–æ–≤</p>
                            </div>
                            <button @click="currentView = 'createQuestionBank'" class="btn-primary">
                                <i class="fas fa-plus mr-2"></i>–°–æ–∑–¥–∞—Ç—å –±–∞–Ω–∫
                            </button>
                        </div>
                        
                        <div class="grid md-grid-cols-2 gap-6">
                            <div v-for="bank in questionBanks" :key="bank.id"
                                 class="quiz-card hover-shadow-xl transition-shadow duration-300 fade-in">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-800 mb-2">{{ bank.name }}</h3>
                                        <p class="text-gray-600 text-sm mb-4">{{ bank.description || '–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è' }}</p>
                                        <div class="flex items-center space-x-3 mb-3">
                                            <span class="tag tag-blue">{{ bank.category || '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' }}</span>
                                            <span v-if="bank.is_public" class="tag tag-green">–ü—É–±–ª–∏—á–Ω—ã–π</span>
                                            <span v-if="bank.randomize_questions" class="tag tag-purple">–†–∞–Ω–¥–æ–º –≤–æ–ø—Ä–æ—Å—ã</span>
                                            <span v-if="bank.randomize_options" class="tag tag-yellow">–†–∞–Ω–¥–æ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-between items-center mb-4">
                                    <div class="text-sm text-gray-600">
                                        <div class="flex items-center">
                                            <i class="fas fa-random mr-2"></i>
                                            <span>–í–æ–ø—Ä–æ—Å–æ–≤ –≤ –∫–≤–∏–∑–µ: {{ bank.questions_per_quiz }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-between items-center">
                                    <button @click="generateQuizFromBank(bank.id)" 
                                            class="btn-primary text-sm">
                                        <i class="fas fa-magic mr-1"></i>–°–æ–∑–¥–∞—Ç—å –∫–≤–∏–∑
                                    </button>
                                    
                                    <div class="text-sm text-gray-500">
                                        <i class="far fa-calendar mr-1"></i>
                                        {{ formatDate(bank.created_at) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div v-if="questionBanks.length === 0" class="text-center py-12">
                            <i class="fas fa-database text-4xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-medium text-gray-600 mb-2">–ë–∞–Ω–∫–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç</h3>
                            <p class="text-gray-500 mb-6">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –±–∞–Ω–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</p>
                            <button @click="currentView = 'createQuestionBank'" class="btn-primary">
                                <i class="fas fa-plus mr-2"></i>–°–æ–∑–¥–∞—Ç—å –±–∞–Ω–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
                            </button>
                        </div>
                    </div>
                </div>

                <div v-if="user && user.role === 'admin' && currentView === 'createQuestionBank'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-8">–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–Ω–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤</h2>
                        
                        <div class="max-w-2xl mx-auto">
                            <div class="space-y-6">
                                <div class="grid md-grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞</label>
                                        <input v-model="newQuestionBank.name" type="text" class="input-field" placeholder="–û—Å–Ω–æ–≤—ã Python">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                        <input v-model="newQuestionBank.category" type="text" class="input-field" placeholder="–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                    <textarea v-model="newQuestionBank.description" rows="3" class="input-field" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –±–∞–Ω–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤..."></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                                    <input v-model="newQuestionBank.tags" type="text" class="input-field" placeholder="python, –æ—Å–Ω–æ–≤—ã, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">
                                </div>
                                
                                <div class="grid md-grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">–í–æ–ø—Ä–æ—Å–æ–≤ –≤ –∫–≤–∏–∑–µ</label>
                                        <input v-model="newQuestionBank.questions_per_quiz" type="number" class="input-field" min="1" max="50" value="10">
                                    </div>
                                </div>
                                
                                <div class="space-y-4">
                                    <h3 class="text-lg font-medium text-gray-800">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                                    
                                    <div class="flex items-center space-x-3">
                                        <input v-model="newQuestionBank.is_public" type="checkbox" id="is-public" class="h-4 w-4 text-indigo-600">
                                        <label for="is-public" class="text-sm text-gray-700">–ü—É–±–ª–∏—á–Ω—ã–π –±–∞–Ω–∫ (–≤–∏–¥–µ–Ω –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)</label>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3">
                                        <input v-model="newQuestionBank.randomize_questions" type="checkbox" id="randomize-questions" class="h-4 w-4 text-indigo-600">
                                        <label for="randomize-questions" class="text-sm text-gray-700">–†–∞–Ω–¥–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤</label>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3">
                                        <input v-model="newQuestionBank.randomize_options" type="checkbox" id="randomize-options" class="h-4 w-4 text-indigo-600">
                                        <label for="randomize-options" class="text-sm text-gray-700">–†–∞–Ω–¥–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤</label>
                                    </div>
                                </div>
                                
                                <div class="flex justify-between pt-6 border-t">
                                    <button @click="currentView = 'questionBanks'" class="btn-secondary">
                                        <i class="fas fa-arrow-left mr-2"></i>–ù–∞–∑–∞–¥
                                    </button>
                                    
                                    <button @click="createQuestionBank" class="btn-primary">
                                        <i class="fas fa-save mr-2"></i>–°–æ–∑–¥–∞—Ç—å –±–∞–Ω–∫
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="user && currentView === 'certificates'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-8">–ú–æ–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</h2>
                        
                        <div class="grid md-grid-cols-2 gap-6">
                            <div v-for="certificate in certificates" :key="certificate.id"
                                 class="bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6 shadow-hover fade-in">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-lg font-bold text-gray-800 mb-2">{{ certificate.quiz_title }}</h3>
                                        <div class="text-sm text-gray-600 mb-4">
                                            ID: {{ certificate.certificate_id }}
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-2xl font-bold" :class="getPercentageColor(certificate.score_percentage)">
                                            {{ certificate.score_percentage }}%
                                        </div>
                                        <div class="text-sm text-gray-600">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-gray-500 mb-4">
                                    <i class="far fa-calendar mr-2"></i>
                                    –í—ã–¥–∞–Ω: {{ formatDate(certificate.issued_at) }}
                                </div>
                                
                                <div class="flex justify-between">
                                    <button @click="downloadCertificate(certificate)" class="btn-secondary text-sm">
                                        <i class="fas fa-download mr-1"></i>–°–∫–∞—á–∞—Ç—å
                                    </button>
                                    <button @click="shareCertificate(certificate)" class="btn-primary text-sm">
                                        <i class="fas fa-share-alt mr-1"></i>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div v-if="certificates.length === 0" class="text-center py-12">
                            <i class="fas fa-certificate text-4xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-medium text-gray-600 mb-2">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                            <p class="text-gray-500 mb-6">–ó–∞–≤–µ—Ä—à–∏—Ç–µ –∫–≤–∏–∑—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã—à–µ 70%, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</p>
                            <button @click="currentView = 'quizzes'" class="btn-primary">
                                <i class="fas fa-play mr-2"></i>–ù–∞—á–∞—Ç—å –∫–≤–∏–∑
                            </button>
                        </div>
                        
                        <div class="mt-8 pt-8 border-t">
                            <h3 class="text-lg font-medium text-gray-800 mb-4">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</h3>
                            <div v-if="userAttempts.length > 0" class="space-y-3">
                                <div v-for="attempt in userAttempts.filter(a => !certificates.find(c => c.quiz_title === getQuizTitle(a.quiz_id)) && a.total_points / a.max_points >= 0.7)"
                                     :key="attempt.id"
                                     class="flex items-center justify-between p-3 border rounded-lg hover-bg-gray-50 slide-in">
                                    <div>
                                        <div class="font-medium text-gray-800">{{ getQuizTitle(attempt.quiz_id) }}</div>
                                        <div class="text-sm text-gray-600">
                                            {{ formatDate(attempt.finished_at) }} ‚Ä¢ 
                                            {{ attempt.total_points }}/{{ attempt.max_points }} –±–∞–ª–ª–æ–≤
                                        </div>
                                    </div>
                                    <button @click="generateCertificate(attempt.id)" class="btn-primary text-sm">
                                        <i class="fas fa-certificate mr-1"></i>–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
                                    </button>
                                </div>
                            </div>
                            <div v-else class="text-center py-6">
                                <p class="text-gray-500">–ù–µ—Ç –ø–æ–ø—ã—Ç–æ–∫, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="user && currentView === 'leaderboard'" class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-8">–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h2>
                        
                        <div class="overflow-x-auto custom-scrollbar">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead>
                                    <tr>
                                        <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            –ú–µ—Å—Ç–æ
                                        </th>
                                        <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                                        </th>
                                        <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                                        </th>
                                        <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            –û—á–∫–∏
                                        </th>
                                        <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            –ü—Ä–æ–π–¥–µ–Ω–æ –∫–≤–∏–∑–æ–≤
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr v-for="(entry, index) in leaderboard" :key="entry.user_id"
                                        :class="entry.user_id === user.id ? 'bg-blue-50' : ''">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div v-if="index === 0" class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-crown text-white"></i>
                                                </div>
                                                <div v-else-if="index === 1" class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-medal text-white"></i>
                                                </div>
                                                <div v-else-if="index === 2" class="w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-medal text-white"></i>
                                                </div>
                                                <div v-else class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center">
                                                    <span class="font-medium text-gray-700">{{ index + 1 }}</span>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div>
                                                    <div class="font-medium text-gray-900">{{ entry.username }}</div>
                                                    <div class="text-sm text-gray-500">{{ entry.user_id === user.id ? '(–í—ã)' : '' }}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-lg font-bold text-gray-900">{{ entry.achievements_count }}</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="font-medium text-gray-900">{{ entry.total_points }}</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="font-medium text-gray-900">{{ entry.completed_quizzes }}</div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div v-if="leaderboard.length === 0" class="text-center py-12">
                            <i class="fas fa-chart-line text-4xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-medium text-gray-600 mb-2">–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –ø—É—Å—Ç–∞</h3>
                            <p class="text-gray-500">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="notification.show" 
             :class="['notification fade-in', notification.type === 'success' ? 'notification-success' : 'notification-error']">
            <i :class="['mr-2', notification.type === 'success' ? 'fas fa-check-circle status-icon-success' : 'fas fa-exclamation-circle status-icon-error']"></i>
            {{ notification.message }}
            <button @click="hideNotification" class="ml-4 icon-button">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="app.js"></script>
</body>
</html>