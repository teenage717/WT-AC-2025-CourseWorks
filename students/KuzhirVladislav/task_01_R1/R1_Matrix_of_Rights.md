# Вариант 06 — Мини-CRM «Фриланс без паники» — Матрица прав (операция × роль)

| Операция                       | Admin | User             |
| ------------------------------ | ----- | ---------------- |
| **Управление пользователями**  |       |                  |
| Просмотреть всех пользователей | ✅    | ❌               |
| Создать пользователя           | ✅    | ❌               |
| Редактировать пользователя     | ✅    | ✅ (свой)        |
| Удалить пользователя           | ✅    | ❌               |
| **Управление этапами**         |       |                  |
| Просмотреть этапы              | ✅    | ✅               |
| Создать этап                   | ✅    | ❌               |
| Редактировать этап             | ✅    | ❌               |
| Удалить этап                   | ✅    | ❌               |
| **Клиенты**                    |       |                  |
| Просмотреть всех               | ✅    | ✅ (свои)        |
| Создать                        | ✅    | ✅               |
| Редактировать                  | ✅    | ✅ (свои)        |
| Удалить                        | ✅    | ❌               |
| **Сделки**                     |       |                  |
| Просмотреть все                | ✅    | ✅ (свои)        |
| Создать                        | ✅    | ✅               |
| Редактировать                  | ✅    | ✅ (свои)        |
| Переместить между этапами      | ✅    | ✅ (свои)        |
| Удалить                        | ✅    | ❌               |
| **Задачи**                     |       |                  |
| Просмотреть все                | ✅    | ✅ (свои)        |
| Создать                        | ✅    | ✅               |
| Редактировать                  | ✅    | ✅ (свои)        |
| Отметить выполненной           | ✅    | ✅ (свои)        |
| Удалить                        | ✅    | ❌               |
| **Счета**                      |       |                  |
| Просмотреть все                | ✅    | ✅ (свои)        |
| Создать                        | ✅    | ✅               |
| Редактировать                  | ✅    | ✅ (Draft)       |
| Менять статус                  | ✅    | ✅               |
| Удалить                        | ✅    | ❌               |
| **Отчёты**                     |       |                  |
| Дашборд со всей статистикой    | ✅    | ✅ (свои данные) |
| Фильтр и поиск                 | ✅    | ✅               |

---

## Примечания

### Scope-ограничения (видимость данных)

- **Admin**: видит все данные без ограничений
- **User**: видит только свои данные (клиентов, сделок, задач, счетов)

### Бизнес-правила

1. **Удаление клиента**: если у клиента есть сделки, удаление может быть заблокировано
2. **Редактирование счёта**: возможно только в статусе "Draft"
3. **Статус счёта**: Draft → Sent → Paid (необратимая цепь)
4. **Удаление сделки**: только Admin может удалить
5. **Drag-and-Drop**: User может перемещать только свои сделки между этапами
