# Вариант 06 — Мини-CRM «Фриланс без паники» — Роли и действия

## Краткое описание

**MVP**: User, Client, Deal, Stage, Task, Invoice

**UI**: Dashboard, DealsPipeline (Kanban), ClientsList, TaskBoard, InvoicesList, StagesList

**API**: `/auth`, `/api/v1/clients`, `/api/v1/deals`, `/api/v1/stages`, `/api/v1/tasks`, `/api/v1/invoices`, `/api/v1/users`

**Приёмка (MVP)**:

1. Воронка продаж (Kanban с drag-and-drop)
2. Доска задач с привязкой к сделкам

---

## Роли и основные действия

### 1. Администратор (ROLE_ADMIN)

#### Пользователи

- CRUD для всех пользователей
- Просмотр и редактирование профилей
- Удаление пользователей

#### Этапы (Справочник)

- Создавать, редактировать, удалять этапы (Stage)
- Настраивать порядок этапов (stageOrder)

#### Клиенты

- Видеть всех клиентов (без ограничений)
- Создавать, редактировать, удалять клиентов
- Просмотреть всех клиентов и их сделки

#### Сделки

- Видеть все сделки
- Создавать, редактировать, удалять сделки
- Перемещать сделки между этапами (drag-and-drop)
- Просмотреть детали и задачи сделки

#### Задачи

- Видеть все задачи
- Создавать, редактировать, удалять задачи
- Назначать задачи пользователям
- Отмечать как выполненные

#### Счета

- Видеть все счета
- Создавать, редактировать, удалять счета
- Менять статусы (Draft → Sent → Paid)

#### Отчёты

- Полный дашборд со всей статистикой
- Просмотреть все отчёты

---

### 2. Пользователь (ROLE_USER)

#### Клиенты (собственные)

- Видеть своих клиентов
- Создавать клиентов
- Редактировать своих клиентов
- Удалять клиентов (зависит от сделок)

#### Сделки (собственные)

- Видеть свои сделки
- Создавать сделки
- Перемещать сделки между этапами
- Редактировать свои сделки
- Удалять сделки других

#### Задачи (собственные)

- Видеть задачи своих сделок
- Создавать задачи
- Отмечать как выполненные
- Редактировать задачи
- Удалять задачи других

#### Счета (собственные)

- Видеть счета своих сделок
- Создавать счета
- Менять статус (Draft → Sent → Paid)
- Редактировать счета (только Draft)
- Удалять счета

#### Этапы

- Просмотреть список этапов
- Создавать/редактировать этапы

#### Дашборд

- Видеть свою статистику (свои клиенты, сделки, задачи, счета)

---

## Примеры сценариев

### Сценарий 1: Фрилансер управляет проектом

1. Добавляет клиента
2. Создаёт сделку и перетаскивает её по воронке
3. Создаёт задачи к сделке
4. Создаёт счёт и отправляет клиенту
5. Отмечает счёт как оплачено

### Сценарий 2: Admin отслеживает прогресс

1. Видит на Dashboard: количество клиентов, сделок, задач, счетов
2. Может управлять всеми данными всех пользователей
3. Может редактировать этапы воронки
