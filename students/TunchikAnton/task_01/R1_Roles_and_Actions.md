# Вариант 39 — «Список дел» — R1 Roles & Actions (роли и действия)

Питч: дедлайны догонят — успей раньше.

**MVP:** задачи, подзадачи, календарь, файлы, теги, напоминания.  
**Приёмка (MVP):** повторяющиеся задачи.

---

## 1 Роли

- **Guest** — неаутентифицированный пользователь.
- **User** — обычный пользователь, работает только со своими задачами.
- **Admin** — администратор: права User + управление пользователями.

---

## 2 Действия по ролям

### Guest

- Просмотр экранов `/login`, `/register`.
- Регистрация.
- Вход (получение JWT).

### User

- `Task`: создать, просмотреть список, открыть детали, редактировать, удалить (только свои).
- `SubTask`: создать, отметить выполненной, удалить (только в рамках своих задач).
- `Tag`: просмотреть список, создать, удалить (только свои).
- **Создание тегов во время создания задачи**: новые имена создаются и привязываются автоматически.
- `File`: upload/list/download/delete (только в рамках своих задач).
- `Reminder`: create/list/delete (только в рамках своих задач).
- `Calendar`: просмотр задач по `due_at`.
- `Repeat`: generate-next для повторяющихся задач.
- `NLU` (заглушка): парсинг текста в черновик задачи.

### Admin

- Все действия User.
- Управление пользователями:
  - список пользователей,
  - смена роли,
  - (опционально) удаление/блокировка, если предусмотрено реализацией.

---

## 3 Безопасность и ограничения (R1)

- JWT авторизация: `Authorization: Bearer <token>`.
- Scope: User имеет доступ только к данным, где `owner_id == current_user.id`.
- RBAC: admin-эндпоинты доступны только роли `admin`.
- Валидация: сервер (Pydantic) + базовая клиентская (формы).
