# Вариант 39 — Задачи + календарь «Список дел» — Маршруты (экраны/страницы) и сценарии (R1)

Питч: дедлайны догонят — успей раньше.

- MVP: задачи, подзадачи, календарь, файлы, теги, напоминания.
- API: /tasks, /subtasks, /calendar, /files, /tags.
- Данные: Task, SubTask, Tag, File, Reminder, User.
- Приёмка (MVP): повторяющиеся задачи.
- Бонусы: NLU-ввод (заглушка); Документация API, Тесты, Kubernetes, CI.

---

## 1 Публичная зона (гость)

### /login — Вход

**Сценарий:**
1) Гость вводит email и пароль
2) Сервер возвращает JWT (`access_token`)
3) Клиент сохраняет токен и открывает `/tasks`

**Ошибки:**
- Неверный email/пароль → понятное сообщение
- Сервер недоступен → “Не удалось подключиться к серверу”

### /register — Регистрация

**Сценарий:**
1) Гость вводит username, email, пароль, подтверждение
2) Сервер создаёт пользователя с ролью `user`
3) Далее: редирект на `/login` (или автологин — если включён)

**Ошибки:**
- Email уже используется
- Пароль слишком короткий
- Username не проходит валидацию

---

## 2 Приватная зона (user/admin)

### /tasks — Список задач (дашборд)

**Содержимое:**
- Список задач пользователя
- Поиск/фильтры (q, is_done, tag, due range)
- Действия: создать задачу, отметить выполненной, удалить, открыть детали

**Сценарии:**
- Создание задачи:
  - title (обязательно)
  - description (опц.)
  - due_at (опц.)
  - repeat_interval_minutes (опц.)
  - **subtasks[] (опц.)**
  - **tags[] (существующие + создание новых)**
- Управление задачей из списка:
  - toggle done
  - delete
  - open `/tasks/:id`

### /tasks/:id — Детали задачи

**Содержимое:**
- Редактирование полей задачи: title, description, due_at, repeat_interval_minutes
- Теги: список + добавление/удаление
- Подзадачи: список + добавление + toggle done + удаление
- Файлы: upload/list/download/delete
- Напоминания: create/list/delete

**Сценарии:**
- Добавить файл → файл виден в списке
- Создать напоминание → отображается и удаляется
- Если задача повторяющаяся → действие “создать следующий повтор” (generate-next)

### /calendar — Календарь

**Содержимое:**
- Отображение задач по датам `due_at`
- Фильтр по тегам (опционально)
- Переход в детали задачи `/tasks/:id`

---

## 3 Админ-зона (admin)

### /admin/users — Пользователи

**Сценарии:**
- Просмотр списка пользователей (поиск/пагинация)
- Смена роли `user/admin`
- (Если есть) удаление пользователя

---

## 4 Сквозные сценарии (User flows)

### “Быстрое планирование”

`/tasks` → Создать задачу → ввести title → добавить подзадачи → добавить теги (в т.ч. новые) → дедлайн → сохранить.

### “Дедлайны через календарь”

`/calendar` → выбрать дату → открыть задачу → обновить due_at → сохранить.

### “Материалы и напоминания”

`/tasks/:id` → upload файла → создать напоминание → убедиться, что всё отображается.

### “Повторы (приёмка MVP)”

Задача с repeat_interval → вызвать generate-next → появилась новая задача с корректным due_at/наследованием полей.
